# ==============================================================================
# CONFIGURATION EXEMPLE - EventCulture Backend
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copier ce fichier vers .env : cp .env.example .env
# 2. Remplir TOUTES les valeurs marquées [REQUIS]
# 3. Générer un JWT_SECRET sécurisé : node scripts/generateSecret.js
# 4. Ne JAMAIS commiter le fichier .env !
#
# ==============================================================================

# ===== ENVIRONNEMENT =====
NODE_ENV=development
PORT=3001
HOST=0.0.0.0

# ==============================================================================
# BASE DE DONNÉES MYSQL [REQUIS]
# ==============================================================================
# ⚠️ SÉCURITÉ: En production, NE PAS utiliser "root" comme utilisateur!
# Créez un utilisateur dédié avec des privilèges limités:
#
# CREATE USER 'actionculture_user'@'localhost' IDENTIFIED BY 'VotreMotDePasseTrèsLong123!';
# GRANT SELECT, INSERT, UPDATE, DELETE ON actionculture.* TO 'actionculture_user'@'localhost';
# FLUSH PRIVILEGES;

DB_NAME=actionculture
DB_USER=root
DB_PASSWORD=root
DB_HOST=localhost
DB_PORT=3306
DB_DIALECT=mysql

# Configuration du pool de connexions
DB_POOL_MAX=10
DB_POOL_MIN=0
DB_POOL_ACQUIRE=30000
DB_POOL_IDLE=10000

# ==============================================================================
# JWT - AUTHENTIFICATION [REQUIS]
# ==============================================================================
# ⚠️ CRITIQUE: Générez un secret unique et sécurisé!
# Exécutez: node scripts/generateSecret.js
# Minimum 32 caractères en production

JWT_SECRET=REMPLACER_PAR_UN_SECRET_GENERE_AVEC_LE_SCRIPT
JWT_EXPIRES_IN=24h

# ==============================================================================
# URLS PUBLIQUES [REQUIS EN PRODUCTION]
# ==============================================================================
# ⚠️ En production: FRONTEND_URL DOIT utiliser HTTPS

API_URL=http://localhost:3001
FRONTEND_URL=http://localhost:3000
BASE_URL=http://localhost:3001

# Origines CORS supplémentaires (séparées par des virgules)
# CORS_ALLOWED_ORIGINS=https://admin.votredomaine.com,https://mobile.votredomaine.com

# ==============================================================================
# UPLOAD FICHIERS
# ==============================================================================
UPLOAD_DIR=uploads
UPLOAD_MAX_SIZE=10485760
UPLOAD_IMAGE_MAX_SIZE=5242880
UPLOAD_DOCUMENT_MAX_SIZE=10485760
UPLOAD_VIDEO_MAX_SIZE=104857600

# Types MIME autorisés
UPLOAD_ALLOWED_IMAGE_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/webp
UPLOAD_ALLOWED_DOCUMENT_TYPES=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
UPLOAD_ALLOWED_VIDEO_TYPES=video/mp4,video/mpeg,video/webm

# Nettoyage des fichiers temporaires (en heures)
TEMP_FILES_RETENTION_HOURS=24

# ==============================================================================
# EMAIL [REQUIS EN PRODUCTION]
# ==============================================================================
# Configurez un vrai service email (Gmail, SendGrid, Mailgun, etc.)
# Pour Gmail: Activez "Mots de passe d'application" dans les paramètres de sécurité

EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=votre-email@gmail.com
EMAIL_PASSWORD=votre-mot-de-passe-application
EMAIL_FROM=noreply@votredomaine.com
EMAIL_QUEUE_ENABLED=true
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY=5000
EMAIL_PAUSED=false

# ==============================================================================
# SÉCURITÉ
# ==============================================================================
# BCRYPT_ROUNDS: Plus c'est élevé, plus le hash est sécurisé mais lent
# Recommandé: 12-14 pour la production

BCRYPT_ROUNDS=12
SESSION_TIMEOUT=86400

# ==============================================================================
# RATE LIMITING
# ==============================================================================
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX=1000

# ==============================================================================
# REDIS (Cache et Rate Limiting distribué)
# ==============================================================================
# En production avec plusieurs instances, configurez un vrai serveur Redis

USE_REDIS_MEMORY=true
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=

# ==============================================================================
# LOCALISATION
# ==============================================================================
DEFAULT_LANGUAGE=fr
SUPPORTED_LANGUAGES=fr,ar,en,tz-ltn,tz-tfng
DEFAULT_TIMEZONE=Africa/Algiers

# ==============================================================================
# PAGINATION
# ==============================================================================
DEFAULT_PAGE_SIZE=10
MAX_PAGE_SIZE=100

# ==============================================================================
# RECHERCHE
# ==============================================================================
MIN_SEARCH_LENGTH=2
MAX_SEARCH_RESULTS=50

# ==============================================================================
# TÂCHES PLANIFIÉES
# ==============================================================================
ENABLE_SCHEDULED_TASKS=true
ENABLE_NEWSLETTER=true
NOTIFICATION_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=90

# ==============================================================================
# AUDIT ET LOGS
# ==============================================================================
ENABLE_AUDIT_LOGS=true

# ==============================================================================
# WEBSOCKET
# ==============================================================================
WEBSOCKET_ENABLED=true

# ==============================================================================
# DATABASE TEST (Optionnel)
# ==============================================================================
DB_USER_TEST=root
DB_PASSWORD_TEST=root
DB_NAME_TEST=actionculture_test
DB_HOST_TEST=localhost
